<html>
<head>
  <script>
      var cancelDestination = "/htcs?tab=my_account";
      var imgUnTick = 'data:image/png;base64,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';
      var pencil = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAaCAYAAABGiCfwAAAFEUlEQVRIic3V+U/TBxjH8S9Mo3H7YWbOLM6Z6dREzeaRZXG/7HQHS1h2uUUlHgzEC1LAYwWmFRURRAVEKWyAqMghYhGwyFELyFFaWm6kw3IoAtWh9G7B937YL/thCcj4YZ8/4HnleZ7keQRhCvIUFtvsT5TYR9qxPr04FTX/NTYbCxkbzbK36MyG1N9pSpJCjwFGndIphXDy3piVrJ76BvPFn7dRscmLgcgoGiKjGL3XDc4pAgcYeHHY5copUWnMipsFFIYFU7Lxe9oOBNOZcAbl6UTGDD0w5gjJJvuFSUMSCe6MjJ2qrFKQWZyHrKSUalkRZeFhKHw38jBsP/eiomg6dZpnhi4cjIVOTkJwczKy5VxWsDk1PYby4jK0Wi2tbToe6+9yLVhM1Q5/Wg4E0RYuoT4hHpxm8yQg3KwYN5y7Gjz4qWgGosOeaGuq0NTr6Bp8QOMfHVTlFZAjDkcVvJP6oABqJYfBauJ5JTcLI97J+aGD68Wv4imeydajy1F2ZDNkNtHc2oNMlset4gLaW9vQpSdwS3yAmoiTYLFjMpnmThiyYxQlFwSbt0a8xQ+S2WyMmEXglRUEpH3IjYbLFBUUoiqrRqttRNXZjkpTTW1+ISONnWAbLdXr9TPGZSQSibuVkaAr1RKz76k5bD49m+0JKwktWEJA5gL8Ly0hNO0jpBkhtDa30drcjaZRR1ZlBVU1DeCi1A6LxoUUCsU0K0bR5eoj5l2JK/BNmkNQxnIi5d8Rlr+WkOvvIspcyJ7U+exLXkt+rZQ63W2UlXLK1WpsjtEUnjB7/MEpmAam8BvqaPPei6vxS30Tcf7HxNVsIrr8C07keRMm+4zgwrfxuTKPb45OxzNwBqJj6yiruQZ22zn6+2eNDxmYaYeoguYYJDfWEJi5lMjir0lT7+Z81RbiK7w4U+rJyZL17M/+AK+41/jqV4GfwmZyKf8AOIkFpk9gR7hbx4yBio7U4YQSHyLkHpy940VG4y/kNktIq/NHWuNDbPkWIuVfsi1+Ed+Gv4TX0dlcKA41uXCIs7MneDHssE7bnTd8sW47CUpvUtRByLoiuNERRXbdEdJrxKTUByCt34V/ymq2xr6Cb/R8shTHTS7YNyHk7/nhZrR0Fco1EjI1InJajlHUE8ftgTiKO08ga4jmelME6boAJEXr2Jm0BN+Y15HVHjU5YcfEIUEQsFjmPRwqNjfpw9HcT0EzeJU7AxmU9SZQpo+nXJ9IXlsop5Xr8Et+g93nF1DSEo8NW9hzQYIgCDiNosGueIa7TvBw4Br3BmWo+q6iuHeZyt4MyrvPIr3zI4EZcxGnLeNmUwwOLCHPD0lwx6JTPdbthcYYHPdzGXqQi/6RHK1RjrL/Aun1/oRkvc/ey6tQNktxYAkXwO35MYdjGQNybBo/aEyCPhlPe3Po+7MIjTGX3I6DHC/6hHCZB0XdiWZchILEfXJd8eh4T0c0ZsMZ6C3FdV+Oq/MS9J6nt+sQvyk2EF3iR1WfzAzGQ8DkHiI41wz03NXv8/PE1icDYw7P7kbi1IXhbAqhv+0gqvZIdA/l5hHXk2gMzJwUJAiC4GIo33vzJkQ+QVxPO0OL6hiPa7wZUYtxtqdi7a5wPB0yPLJYTXHDw8MvTxoSBEGoVZcPr1y1nD3bg3hn6WJiY3YwqC2gR1tMq/q2o766Mr+sTPn5f0L+GW+fbXh4eKBr0GIwdDbcbTaI6+o6Fkql6vFv3P8xfwEMm+ridcKfkQAAAABJRU5ErkJggg==";
      var imgMax = "data:image/png;base64,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";
      var imgMin = "data:image/png;base64,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"
      var data = {};
      var checkTime = 0
  </script>

  <%= stylesheet_link_tag 'panel' %>
</head>
<body>

<%= form_tag quality_control_tests_path do %>
    <fieldset>
      <legend>Testkit Quality Control Tests</legend>

      <br/>
      <label for="id"> </label>
      <select id="id" name="id">
        <option></option>
        <%= @kits.each do |kit| %>
            <option id="<%= kit.name %>" value="<%= kit.name %>"> <%= kit.name %></option>
        <% end %>
      </select>
      <br/>
    </fieldset>
    <%= submit_tag "Finish" %>

<% end %>
</body>

<%= javascript_include_tag 'touchscreentoolkitV2/ts' %>
<%= javascript_include_tag 'custom_date' %>
<%= javascript_include_tag 'jquery-1.3.2.min' %>

<script>

    var sidePanelData = {<%= @side_panel_data.html_safe rescue ""%>};
    //Highlist list object
    function highlightList(obj) {

                var opts = document.getElementsByClassName("serum-li");

                for (var i = 0; i < opts.length; i++) {
                    if (opts[i].getAttribute("selecttag") != null) {
                        opts[i].removeAttribute("selecttag");
                        opts[i].style.backgroundColor = (opts[i].getAttribute("tag") == "odd" ? "#eee" : "");
                    }
                }

            obj.setAttribute("selecttag", true);
            obj.style.backgroundColor = "lightblue";
            obj.style.color = "black";
    }

    __$("row1").style.display = "none";
    __$("buttons").style.verticalAlign = "bottom";
    __$("buttons").style.width = "100%";
    __$("buttons").style.height = "100%";

    btnNext.style.width = "250px";
    btnNext.onclick = function () {

        for (var i in kit_names) {

            if (!validateCompleteness(kit_names[i], false)) {
                customAlert("<span style=\"color: gray;\">'" + kit_names[i] + "'</span> entries incomplete!")
                return;
            }
        }
        showSummary();
    }
    btnCancel.style.width = "250px";

    var display = "inline-table";

    btnDivs = __$('buttons').children[0].children;

    btnDivs[1].style.display = "none";
    btnDivs[2].style.display = "none";

    btnDivs[0].style.display = "inline-table";
    btnDivs[3].style.display = "inline-table";

    btnDivs[3].style.cssFloat = "right";

    var dsp = document.createElement("div");
    dsp.id = "dsp";
    dsp.style.display = "table-cell";
    dsp.style.border = "1px solid #3465a4";
    dsp.style.overflow = "hidden";
    dsp.style.borderRadius = "10px";
    dsp.style.width = "70%";
    dsp.style.height = "100%";
    dsp.style.verticalAlign = "top";
    dsp.innerHTML = "&nbsp";
    btnNext.innerHTML = "Next";

    __$('textForid').style.height = "100%";
    __$('textForid').style.width = "100%";
    var inputKeys = [];
    var inputControls = {};

    var kit_names = [];


    //build a javascript hash defining entry controls
    //All defintitions in controllers
    <% @input_controls.each do |control|%>
    inputKeys.push("<%= control[0].strip%>")
    inputControls["<%= control[0].strip%>"] = {};
    <% control[1].each do |key, value| %>
    inputControls["<%= control[0].strip%>"]["<%= key.strip%>"] = "<%= value%>"
    <%end%>
    <% end %>

    var lst = __$('ul1').children;
    for (var i = 0; i < lst.length; i++) {

        lst[i].innerHTML = "<span class='lst-label'>" + lst[i].innerHTML + "</span>"
        lst[i].className = "lst-li";
        loadSubOptions(lst[i]);
    }

    function decide(serum_type, result){

        var outcome = "Not acceptable";
        if((serum_type.match(/Positive/i) && result.match(/Positive/i)) ||
                (serum_type.match(/Negative/i) && result.match(/Negative/i))   ){
            outcome = "Acceptable";
        }
        return outcome;
    }

    function showSummary(){

        if (__$("summary-div"))
            __$("summary-div").parentNode.removeChild(__$("summary-div"));

        var div = document.createElement("div");
        div.id = "summary-div";
        document.body.appendChild(div);

        var table = document.createElement("div");
        table.className = "summary-table";
        div.appendChild(table);

        var header = document.createElement("div");
        header.className = "summary-header";
        var values = ["Serum lot number", "Serum Exp. date", "Serum type", "Kit name",
            "Kit lot number", "Kit Exp. date", "Control line seen", "Result", "Outcome"];
        for(var i in values){
            var td = document.createElement("div");
            td.className = "summary-cell";
            td.innerHTML = values[i];
            header.appendChild(td);
        }
        table.appendChild(header);

        var keys = Object.keys(data);
        for(var i in keys){
           var kit_name = keys[i].split("-")[0];
           var serum_type = keys[i].split("-")[1].match(/Positive|Negative/)[0];
           var info = data[keys[i]][1];

           var values = [[info["Serum lot number"]],
               ["&nbsp", ("/inventory/get_exp_date?type=serum&lot_number=" + info["Serum lot number"])],
               [serum_type],
               [kit_name],
               [info["Testkit lot number"]],
               ["&nbsp", ("/inventory/get_exp_date?type=kit&lot_number=" + info["Testkit lot number"])],
               [info["Control line seen"]],
               [info["Result"]],
               ["<span style='font-style: italic; '>" + decide(serum_type, info["Result"]) + "</span>"]];

           var row = document.createElement("div");
           row.className = "tr summary-row";
           row.id = keys[i];

           for (var k in values){
               var td = document.createElement("div");
               td.className = "td summary-cell-plain";
               td.innerHTML = values[k][0] || "&nbsp";
               td.id = i + "_" + k;
               if(values[k].length == 2){
                   //ajaxify to fork expiry date
                   jQuery.ajax({
                               url: values[k][1] + "&td_id=" + (i + "_" + k),
                               success: function (result) {

                                   result = JSON.parse(result)

                                 if (__$(result['td_id']))
                                    __$(result['td_id']).innerHTML = result["out_text"]
                               }
                           }
                   )
               }

               row.appendChild(td);
           }
           table.appendChild(row);
        }

        var footer = document.createElement("div");
        footer.innerHTML  = "<div id='backBTN' class='button red' style='float: left'>Back</div><div id='finishBTN' style='float: right' class='button green'>Finish</div>"
        footer.className = "footer";
        footer.id = "buttons";
        div.appendChild(footer);
        footer.style.position = "absolute";
        footer.style.bottom = "7px";
        footer.style.width = "98%";
        footer.style.background = "gray"
        footer.style.marginLeft = "12px";

        __$("backBTN").onmousedown = function(){
            __$("summary-div").parentNode.removeChild(__$("summary-div"));
        }

        __$("finishBTN").onmousedown = function(){
            buildParams();
            document.forms[0].submit();
        }
    }

    function loadSubOptions(node){
        jQuery("node").css({
            "hover" : "none"
        })
        var select = document.createElement("ul");
        select.className = "serum-ul";
        var target = node.getAttribute("value");
        node.setAttribute("target", target)
        node.appendChild(select);

        <% @serum_types.each_with_index do |serum, i|%>
            var serum = '<%= serum%>';
            var i = parseInt('<%= i %>');
            var li = document.createElement("li");
            li.className = "serum-li";
            if (i % 2 == 1)
                li.className += " serum-even"
            li.innerHTML = serum;
            li.setAttribute("value", (target + " - <%= serum%>"));
            li.setAttribute("target", (target + " - <%= serum%>"));
            li.id = li.getAttribute("target");
            kit_names.push(li.id);
            data[li.getAttribute("target")] = {};
            data[li.getAttribute("target")][1] = {};
            for (var i in inputKeys){
                data[li.getAttribute("target")][1][inputKeys[i]] = "";
            }

            li.onmousedown = function () {
                highlightList(this);
                loadControls(this, undefined, true);
            }
            select.appendChild(li)
        <% end %>
    }

    function buildParams() {

        var captured = Object.keys(data);
        for (var k in captured) {
            var counts = Object.keys(data[captured[k]]);
            for (var n in counts) {
                var fields = Object.keys(data[captured[k]][counts[n]]);
                for (var i in fields) {
                    var info = document.createElement("input");
                    info.setAttribute("name", "data[" + captured[k] + "][]" + fields[i]);
                    info.setAttribute("value", data[captured[k]][counts[n]][fields[i]]);
                    document.forms[0].appendChild(info);
                }
            }
        }
    }

    function setInputTable() {

        var table = document.createElement("div");
        table.className = "table";
        table.id = "inputTable";
        dsp.appendChild(table);

        var holder = document.createElement("div");
        holder.className = "holder";
        holder.innerHTML = "<table id='controls-holder'><tr><td id='keyboard-data'></td><td id='done-data'></td></tr></table>"
        dsp.appendChild(holder);
        var keyboard = document.createElement("div");
        keyboard.id = "keyBoard";
        keyboard.className = "row keyboard";

        __$("keyboard-data").appendChild(keyboard);
        __$("done-data").appendChild(doneButton());
    }

    function doneButton() {

        var done = document.createElement("div");
        done.className = "done blue";
        done.innerHTML = "Done"
        done.onmousedown = function () {
            loadList();
        }
        return done
    }

    function addBatchButton() {

        var addbut = document.createElement("div");
        addbut.id = "addbatch";
        addbut.className = "addbatch blue";
        addbut.innerHTML = "New " + dsp.getAttribute("target") + " batch";
        addbut.onmousedown = function () {

            if (validateCompleteness()) {

                if (__$("img-min") && __$("img-min").style.display == "block") {
                    __$("img-min").onmousedown();
                }

                var max = 0;
                if (Object.keys(data[dsp.getAttribute("target")]).length > 0) {
                    var max = Math.max.apply(Math, Object.keys(data[dsp.getAttribute("target")]));
                }
                loadControls(__$(dsp.getAttribute("target")), (max + 1));
            } else {
                customAlert("Cannot proceed, incomplete test!");
            }
        }
        return addbut;
    }

    function loadList() {

        var collS = inputKeys.length;
        var kit_name = dsp.getAttribute("target");
        dsp.removeAttribute("pos")
        dsp.innerHTML = "<table  id='summary-header'><tr><td> <img style='display: none' id='img-min' width = '45' height='40'> <img id='img-max' width = '45' height='40'></td><td id='summary-label'>Test Summary for "
                + kit_name + "</td><tr></table> <table id='list-h'> </table> <div class='scrollable' id='scrollable'>  <table id='list'></table></div>";


        __$("img-max").src = imgMax;
        __$("img-min").src = imgMin;

        __$("img-max").onmousedown = function () {

            __$("ul1").parentNode.style.display = "none";
            jQuery("#row0").hide();
            jQuery("#dsp").css({
                position: "absolute",
                "z-index": "100",
                top: "5px",
                left: "5px",
                width: "99%",
                height: screen.height + "px"
            })

            __$("scrollable").style.height = 0.83 * window.innerHeight + "px";
            jQuery(jQuery(".red")[0]).parent().parent().parent().hide();
            __$("img-max").style.display = "none";
            __$("img-min").style.display = "block";
        }

        __$("img-min").onmousedown = function () {

            __$("ul1").parentNode.style.display = "block";

            jQuery("#row0").show();

            jQuery("#dsp").css({
                position: "relative",
                "z-index": "50",
                top: "5px",
                left: "5px",
                width: "70%",
                height: "100%"
            })

            __$("scrollable").style.height = 0.6 * window.innerHeight + "px";
            jQuery(jQuery(".red")[0]).parent().parent().parent().show();
            __$("img-max").style.display = "block";
            __$("img-min").style.display = "none";
        }

        var heada = document.createElement("div");
        heada.className = "row";
        __$("list-h").appendChild(heada);
        __$("scrollable").style.height = 0.6 * window.innerHeight + "px";
        var iKeys = inputKeys.concat(["&nbsp", "&nbsp"]);
        var h80w = (160 / screen.width)  * 100;

        for (var i = 0; i < iKeys.length; i++) {

            var td = document.createElement("div");
            td.className = "td";

            if (iKeys[i] != "&nbsp") {
                td.className += " heada";
            }else{
                td.style.width = "80px !important";
                td.style.minWidth = "80px !important";
            }
            td.innerHTML = iKeys[i];
            heada.appendChild(td);
        }

        var batches = data[kit_name];
        var keys = Object.keys(batches);

        for (var i = (keys.length - 1); i >= 0; i--) {

            var r = document.createElement("div");
            r.id = keys[i];
            r.className = "row";
            __$("list").appendChild(r);

            for (var j = 0; j < inputKeys.length; j++) {
                var td = document.createElement("div");
                td.className = "td s-data";
                td.style.width =  Math.floor((100 -h80w)/collS) + "%";
                if (typeof( data[kit_name][keys[i]][inputKeys[j]]) != "undefined" &&
                        data[kit_name][keys[i]][inputKeys[j]].length > 0) {
                    td.innerHTML = data[kit_name][keys[i]][inputKeys[j]];
                } else {
                    td.innerHTML = "?";
                }
                r.appendChild(td);
            }

            var td = document.createElement("div");
            td.className = "td edit blue";
            td.innerHTML = "<img id = 'img-edit' height='30' width='30'/>";
            td.onmousedown = function () {

                if (__$("img-min") && __$("img-min").style.display == "block") {
                    __$("img-min").onmousedown();
                }
                loadControls(__$(dsp.getAttribute("target")), this.parentNode.id)
            }
            r.appendChild(td);
            td.getElementsByTagName("img")[0].src = pencil;

            var td = document.createElement("div");
            td.className = "td del blue";
            td.innerHTML = "<img id = 'img-del' height='30' width='30'/>";
            td.onmousedown = function () {
                confirm(this.parentNode);
            }
            r.appendChild(td);
            td.getElementsByTagName("img")[0].src = imgUnTick;
        }

        //__$("add-batch").appendChild(addBatchButton());
    }

    function createRow(key, options) {

        var kit_name = dsp.getAttribute("target");
        var pos = dsp.getAttribute("pos");

        var row = document.createElement("div");
        row.className = key + " row";

        __$("inputTable").appendChild(row);
        var label = document.createElement("label")
        label.className = "label td";
        label.innerHTML = key;
        row.appendChild(label);

        var input = document.createElement("input")
        input.id = key;
        input.setAttribute("type", options["type"])
        input.className = "input td";

        if (kit_name && data[kit_name] &&
                data[kit_name][pos] && data[kit_name][pos][key]) {
            input.value = data[kit_name][pos][key];
        }
        input.onmousedown = function () {
            updateTicks(this);
            __$("keyBoard").innerHTML = "";
            if (this.getAttribute("type") == "number") {
                showFixedKeyboard(this, __$("keyBoard"), {"/": true, ":": true, "abc": true}, true, false);
            } else if (this.getAttribute("type") == "date") {
                showDate(__$("keyBoard"), this);
            } else if (this.getAttribute("type") == "list") {
               showList(this.id);
            }else{
               showFixedKeyboard(this, __$("keyBoard"), {}, false, true);
            }
        }
        row.appendChild(input);

        var tick = document.createElement("div")
        tick.className = "tick td tick_" + key;
        tick.innerHTML = "";
        row.appendChild(tick);

        var msg = document.createElement("div")
        msg.className = "msg td msg_" + key;

        if(key.match(/lot number|result/i)) {
            msg.innerHTML = "<span class='warning' span></span><br /> <span class='info'></span>";
        }

        row.appendChild(msg);
    }

    function showList(target){

        var li_options = [];
        if (target == "Control line seen"){
            li_options = ["Yes", "No"];
        }else if (target == "Result"){
            li_options = ["Negative", "Weak Positive", "Strong Positive"];
        }

        __$("keyBoard").innerHTML = "<ul id='listing'> </ul>"
        for (var i in li_options){
            var li = document.createElement("li");
            li.className = "li-item";
            li.setAttribute("tag",  (i % 2 == 0 ? "even" : "odd"));
            li.setAttribute("target", target);
            if (i % 2 == 1)
                li.style.backgroundColor = "rgb(238, 238, 238)";

            li.innerHTML = li_options[i];
            li.onmousedown = function(){
                highlight(this);
            }
            __$("listing").appendChild(li);
        }
    }

    function updateTicks(node) {
        var ticks = document.getElementsByClassName("tick");
        for (var i in ticks) {
            ticks[i].innerHTML = "";
        }
        document.getElementsByClassName("tick_" + node.id)[0].innerHTML = "*";
    }

    function loadControls(node, pos, checkWindowSwitch) {
        dsp.innerHTML = "&nbsp";
        dsp.setAttribute("target", node.getAttribute("value"));

        if (checkWindowSwitch) {
            if (validateCompleteness(node.getAttribute("target"), false) && Object.keys(data[dsp.getAttribute("target")]).length > 0) {
                loadList();
                return;
            }
        }

        if (typeof(pos) == "undefined") {
            if (Object.keys(data[dsp.getAttribute("target")]).length > 0) {
                dsp.setAttribute("pos", Math.max.apply(Math, Object.keys(data[dsp.getAttribute("target")])));
            } else {
                dsp.setAttribute("pos", 1);
            }
        } else {
            dsp.setAttribute("pos", pos);
        }

        setInputTable();

        for (var n in inputKeys) {
            var buildRow = createRow(inputKeys[n], inputControls[inputKeys[n]]);
        }
        __$(inputKeys[0]).onmousedown();
        __$(inputKeys[0]).focus();
    }

    function highlight(item) {

        var opts = item.parentNode.children;

        for (var i = 0; i < opts.length; i++) {
            opts[i].style.backgroundColor = (opts[i].getAttribute("tag") == "odd" ? "rgb(238, 238, 238)" : "");
        }

        __$(item.getAttribute("target")).value = item.innerHTML;
        item.style.backgroundColor = "lightblue";
        item.style.background = "lightblue !important";
        item.style.color = "black";
    }

    function validateCompleteness(li_name, checkAll) {
        var returnValue = true;
        try {
            if (!li_name) {
                var li_name = dsp.getAttribute("target");
            }

            var last_pos = 0;
            if (Object.keys(data[li_name]).length > 0) {
                var last_pos = Math.max.apply(Math, Object.keys(data[li_name]));
            }

            if (checkAll) {
                var checkSum = [];
                for (var i = 0; i < inputKeys.length; i++) {
                    try {
                        var val = data[li_name][last_pos][inputKeys[i]]
                        if (val.length > 0)
                            checkSum.push(val);
                    } catch (x) {
                    }
                }

            }

            for (var i = 0; i < inputKeys.length; i++) {

                if (!(data[li_name][last_pos] && data[li_name][last_pos][inputKeys[i]] && data[li_name][last_pos][inputKeys[i]].trim().length > 0)) {

                    if (checkAll) {
                        if (checkSum.length > 0) {
                            returnValue = false;
                            break;
                        }
                    } else {
                        returnValue = false;
                    }
                } else {

                }
            }
        } catch (e) {
            console.log(e)
        }
        return returnValue;
    }

    function updateInput() {

        checkTime += 50;
        var check = dsp.getAttribute("target");
        var pos = dsp.getAttribute("pos");
        var max = 0;

        checkHeaderPlacement();

        try {
            var max = Math.max.apply(Math, Object.keys(data[check]));
        } catch (e) {
        }

        if (max > 0 && parseInt(pos) < parseInt(max) && typeof(data[check][pos]) == "undefined") {
            //this key was voided dont recreate it in hash
            setTimeout("updateInput()", 50);
            return;
        }

        if (typeof(check) != "undefined" && typeof(pos) != "undefined" &&
                check.length > 0 && parseInt(pos) > 0) {

            if (!data[check]) {
                data[check] = {};
            }

            if (!data[check][pos]) {
                data[check][pos] = {};
            }

            for (var i = 0; i < inputKeys.length; i++) {
                if (__$(inputKeys[i]))
                    data[check][pos][inputKeys[i]] = __$(inputKeys[i]).value;
            }
        }

        if (checkTime % 500 == 0) {
            try {
                jQuery.ajax(
                        {
                            url: "/inventory/check_presence?kit_lot_number=" +
                                    __$("Testkit lot number").value + "&serum_lot_number=" +
                                    __$("Serum lot number").value,
                            success: function (result) {
                                result = JSON.parse(result)

                                if (result["Serum lot number"]) {
                                    var nodes = document.getElementsByClassName("msg_Serum lot number")
                                    if (nodes.length > 0) {
                                        try {
                                            nodes[0].getElementsByClassName("info")[0].innerHTML = result["Serum lot number"]["info"];
                                            nodes[0].getElementsByClassName("warning")[0].innerHTML = result["Serum lot number"]["warning"]
                                        } catch (e) {
                                        }
                                    }
                                }

                                if (result["Testkit lot number"]) {
                                    var nodes = document.getElementsByClassName("msg_Testkit lot number")
                                    if (nodes.length > 0) {
                                        try {
                                            nodes[0].getElementsByClassName("info")[0].innerHTML = result["Testkit lot number"]["info"]
                                            nodes[0].getElementsByClassName("warning")[0].innerHTML = result["Testkit lot number"]["warning"]
                                        } catch (e) {
                                        }
                                    }
                                }

                                var nodes = document.getElementsByClassName("msg_Result")

                                if ((__$("Result").value.match(/Positive/i) && dsp.getAttribute("target").match(/Positive/i)) ||
                                        (__$("Result").value.match(/Negative/i) && dsp.getAttribute("target").match(/Negative/i))){
                                    nodes[0].getElementsByClassName("warning")[0].innerHTML ="";
                                    nodes[0].getElementsByClassName("info")[0].innerHTML = "Acceptable";
                                }else if (__$("Result").value.length > 0){
                                    nodes[0].getElementsByClassName("info")[0].innerHTML = ""
                                    nodes[0].getElementsByClassName("warning")[0].innerHTML = "Not acceptable!"
                                }
                            }
                        })
            } catch (e) {
            }
        }

        setTimeout("updateInput()", 50);
    }

    function checkHeaderPlacement(){

        var hnodes = document.getElementsByClassName("heada");
        var snodes = document.getElementsByClassName("s-data");

        if(snodes.length >= inputKeys.length && hnodes.length == inputKeys.length) {
            for (var i = 0; i < inputKeys.length; i++) {

                if ([i] != "&nbsp") {
                    hnodes[i].style.width = jQuery(snodes[i]).width() + "px";

                }
            }
        }

        jQuery("#list-h, #list").show();
    }

    function showBlockShield(){

        showShield()

        __$("shield").onclick = function(){

        }
    }

    function confirm(node) {

        showBlockShield()

        if (__$('popup'))
            __$('popup').parentNode.removeChild(__$('popup'));

        var ele = document.createElement('div')
        ele.id = "popup";
        ele.style.display = "inline";
        html = "<div style='display:table;width:100%;'><div style='display:table-row;width:100%;'>"
        html += "<div id='text'>Clear test details?</div></div><div style='display:table-row;width:100%;'>"
        html += '<div style="display:table-cell;width:100%;"><div style="display:table;width:100%;"><div style="display:table-row;width:100%;"><div id="cancel"><button class="button red_cancel" style="margin: 3px; font-size: 20px; height: 60px;" onmousedown="reset()">No</button></div>'
        html += '<div id="confirm"><button class="button blue" style="margin: 3px; font-size: 20px; height: 60px;" onmousedown="voiding(' + node.id + ')">Yes</button></div>'
        html += "</div></div></div></div></div>"
        ele.innerHTML = html;
        document.body.appendChild(ele);
    }

    function customAlert(msg) {

        showBlockShield();

        if (__$('popup'))
            __$('popup').parentNode.removeChild(__$('popup'));

        var ele = document.createElement('div')
        ele.id = "popup";
        ele.style.display = "inline";
        html = "<div style='display:table;width:100%;'><div style='display:table-row;width:100%;'>"
        html += "<div id='text'>" + msg + "</div></div><div style='display:table-row;width:100%;'>"
        html += '<div id="confirm"><button class="button blue" style="margin: 3px; font-size: 20px; height: 55px;" onmousedown="reset()">Ok</button></div>'
        html += "</div></div></div></div>";
        ele.innerHTML = html;
        document.body.appendChild(ele);
    }

    function reset() {

        if (__$("shield"))
            __$("shield").parentNode.removeChild(__$("shield"))
        ele = document.getElementById('popup');
        ele.style.display = "none";
        ele.parentNode.removeChild(ele);
    }

    function voiding(node_id) {
        var kit_name = dsp.getAttribute("target");

        for (var j in inputKeys){
            data[kit_name][node_id][inputKeys[j]] = "";
        }

        reset();

        __$(kit_name).onmousedown();
    }

    __$('textForid').value = -1;
    row.insertBefore(dsp, row.firstChild);
    __$("row0").parentNode.appendChild(__$('buttons'));

    btnCancel.parentNode.parentNode.parentNode.style.backgroundColor = "grey";

    document.getElementsByClassName("serum-li")[0].onmousedown();

    setTimeout("updateInput()", 5);
</script>
</html>
<style>

    * {
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: -moz-none;
        -o-user-select: none;
        user-select: none;
    }

    #shield{
        z-index: 900;
    }

    .red_cancel {
        background-color: #a90329;
        background-image: linear-gradient(to bottom, #a90329, #6d0019);
        border: 1px solid #72021c;
        border-radius: 3px;
        color: #ffffff;
        display: inline-block;
        font-family: arial, helvetica, sans-serif;
        font-size: 28px;
        font-weight: bold;
        padding: 10px;
        text-decoration: none;
        text-shadow: -1px -1px 0 rgba(0, 0, 0, 0.3);
    }

    .lst-li:hover, .lst-li {
        background: #ffffff !important;
        color: black  !important;
        cursor: default !important;
        border: 2px dotted lightblue;
        border-radius: 5px;
        margin: 5px !important;
    }

    .lst-label{
        text-shadow: gray 2px 0px 0px;
    }

    .serum-li{
       list-style-type: none;
        cursor: pointer;
        border-radius: 3px;
        padding: 8px;
    }

    .serum-even{
        background: rgb(238, 238, 238);
    }

    .blue {
        background-color: #a7cfdf;
        background-image: linear-gradient(to bottom, #a7cfdf, #23538a);
        border: 1px solid #7eb9d0;
        border-radius: 3px;
        color: #ffffff;
        display: inline-block;
        font-family: arial, helvetica, sans-serif;
        font-size: 28px;
        font-weight: bold;
        padding: 10px;
        text-decoration: none;
        text-shadow: -1px -1px 0 rgba(0, 0, 0, 0.3);
    }

    button {
        border-radius: 10px !important;
        cursor: pointer;
        font-size: 0.5em;
        margin: 3px;
        min-height: 50px;
        min-width: 50px;
        padding: 15px;
        border: none;
    }

    #text, #confirm, #cancel {
        display: table-cell;
    }

    #confirm {
        float: right;
        width: 50%;
    }

    #cancel {
        float: left;
        width: 50%;
    }

    #text {
        height: 70px;
        width: 100%;
    }

    #popup {
        -moz-user-select: none;
        background-color: #FEEFB3;
        border: 4px solid #C6C6C6;
        border-radius: 15px 15px 15px 15px;
        color: #9F6000;
        font-size: 28px;
        height: 165px;
        left: 30%;
        padding: 5px;
        position: absolute;
        text-align: center;
        top: 3%;
        width: 319px;
        z-index: 991;
    }

    .edit img, .del img {
        margin: auto;
        margin-left: 20px;
        margin-right: 20px
    }

    .del, .edit {
        border-radius: 10px;
        width: 100px !important;
    }

    #summary-header {
        width: 100%;
        text-align: center;
        font-size: 26px;
        font-weight: bold;
        margin-top: 0.2%;
        margin-bottom: 0.4%;
    }

    #done-data {
        width: 15%;
        margin: auto;
    }

    #keyboard-data {
        width: 85%;
        margin: auto;
    }

    .done {
        margin-left: 20px;
        margin-top: 100% !important;
        border-radius: 12px;
        float: right;
    }

    .addbatch {
        width: 90%;
        margin-top: 20px;
        margin-right: 6%;
        max-height: 50px;
        vertical-align: middle;
        border-radius: 12px;
        font-size: 20px;
        float: right;
    }

    .add-batch {
        margin-left: 10px;
        float: right;
        width: 15%;
    }

    #controls-holder {
        width: 90%;
        margin: auto;
    }

    #keyBoard {
        margin: auto;
        float: right;
    }

    #dateTable {
        margin: auto;
        margin-top: 25px;
    }

    .holder {
        margin: auto;
        width: 93%;
        max-height: 290px;
        min-height: 250px;
        border-radius: 10px;
        padding-top: 5px;
        border: 1px solid rgb(52, 101, 164);
    }

    .input {
        font-size: 24px;
        padding: 10px;
        border: 1px solid rgb(52, 101, 164);
        border-radius: 10px;
        width: 70%;
        vertical-align: middle;
        margin: auto;
        text-align: center;
    }

    .label {
        padding: 10px;
        color: rgb(51, 51, 51);
        font-size: 24px;
        width: 35%;
        vertical-align: middle;
    }

    .tick {
        padding: 10px;
        color: red;
        font-size: 26px;
        font-weight: bold;
        width: 20%;
        margin: auto;
        vertical-align: middle;
        float: right;
    }

    .table {
        display: table;
        padding: 0px;
        padding-left: 10%;
    }

    .row {
        display: table-row;
        width: 97%;
        margin: auto;
    }

    .td {
        display: table-cell;
        margin: auto;
    }

    #inputTable {
        width: 89%;
        height: 260px;
        max-height: 260px;
    }

    #delete {
        background-image: url(<%= asset_path 'delete.jpeg' %>);
        background-size: cover;
        border-style: none;
    }

    #print {
        background-image: url(<%= asset_path 'printer2.png' %>);
        background-size: cover;
    }

    .txt {
        color: #000000;
        display: block;
        font-size: 19px;
        position: relative;
        text-align: center;
        top: 80px;
    }

    #list, #list-h {
        width: 96%;
        margin: auto;
        font-size: 24px;
        color: rgb(51, 51, 51);
    }

    #list-h .heada {
        color: black;
        text-align: center;
        height: 30px !important;
        border-radius: 5px;
        border: 1px solid rgb(52, 101, 164);
        background: lightgray;
    }

    #list .s-data {
        color: rgb(51, 51, 51);
        font-size: 22px;
        height: 40px !important;
        text-align: center;
        vertical-align: middle;
        border-bottom: 1px dotted rgb(52, 101, 164);
        border-left: 0.5px dotted rgb(52, 101, 164);
    }

    .gray {
        background: gray !important;
        backgroundColor: gray !important;
    }

    #summary-label {
        width: 85%;
    }

    #scrollable {
        overflow: auto;
    }

    #img-min{
        padding-left: 0px;
        margin-left: 0px;
    }

    #listing{
        width: 98%;
        padding: 0px;
        border: 3px lightgray;
    }

    .li-item{
        list-style: none outside none;
        color: #000;
        cursor: pointer;
        font-family: "Nimbus Sans L", Arial "Arial Narrow", sans-serif;
        font-size: 1.7em;
        margin-bottom: 2px;
        margin-top: 2px;
        padding: 10px;
        padding-left: 0px;
        text-align: left;
        border-spacing: 5px;
    }

    .li-item:hover{
        background: rgb(153, 153, 153) !important;
        color: rgb(238, 238, 238);
    }

    #summary-div{
        position: absolute;
        top: 1%;
        height: 99%;
        width: 99%;
        left: 0.5%;
        font-size: 20px;
        background: white;
    }

    .summary-table{
        display: table;
        width: 97%;
        margin: auto;

    }

    .summary-header{
        display: table-row;
        font-size: 20px;
        width: 100%;
        margin: auto;
    }

    .summary-cell{
        display: table-cell;
        width: 10% !important;
        border: 0.5px dotted gray;
        padding-left: 10px;
        background: lightblue;
        border-radius: 3px;
        text-shadow: -1px -1px 0 rgba(0, 0, 0, 0.3);
    }

    .summary-row{
        display: table-row;

    }

    .summary-cell-plain{
        display: table-cell;
        padding-left: 10px;
        font-size: 18px;
        height: 50px;
        border: 1px dotted;
        vertical-align: middle;
    }
.footer{
    border-radius: 15px;
    height: 88px;
  }

.footer .button{
    width: 200px;
    text-align: center;
    padding:0px;
    margin: 7px;
    margin-top: 10px;
    padding-top: 6px;
    vertical-align: middle;
    height: 60px !important;
    max-height: 60px !important;
}
    .msg .warning{
        color: red;
        padding: 10px;
    }

    .msg{
        font-style: italic;
        font-size: 18px;
        width: 25% !important;
    }

    .msg .info{
        color: gray;
    }
</style>
