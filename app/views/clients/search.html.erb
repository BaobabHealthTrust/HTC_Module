<html>
	<head>
      <style>
          #popup {
              -moz-user-select: none;
              background-color: #FEEFB3;
              border: 4px solid #C6C6C6;
              border-radius: 15px 15px 15px 15px;
              color: #9F6000;
              font-size: 28px;
              height: 165px;
              left: 40%;
              padding: 5px;
              position: absolute;
              text-align: center;
              top: 2%;
              width: 319px;
              z-index: 991;
          }
      </style>
	<script>
					var cancelDestination = "/htcs";

            function __$(id){
                    return document.getElementById(id);
            }

            function doLogin(id){

                            if(__$(id) && __$(id).value.trim().match(/\$/)){

                               __$(id).value =  __$(id).value.trim().replace(/\$/, "");

                                    clearTimeout(id)
                                      document.forms[0].submit();

                                    return;
                            }

                      setTimeout("doLogin('" + id + "')", 500);
            }

	</script>
          <style>
            <% if @show_counselling_room == true %>
              #stage, #btn3, #btn2, #btn1{
                    display: none ! important;
              }
              #buttons{
                width:10% ! important;
              }
            <% end %>
             #popupkeyboard{
                height: 255px ! important;
            }
          </style>
	</head>
<body onload="adjust()">


<%= form_tag search_results_path do %>
            <fieldset>
			<legend>Search Client</legend>
	
	<br />
                          <% if @show_counselling_room != true %>
                                  <label for="gender"> Gender </label>
																	<select id="gender" name="gender">
																			<option></option>
																			<option value="Female">Female</option>
																			<option value="Male">Male</option>
																		</select>
                                 
																 <br />
																		
                                  <label for="date_of_birth">Date Of Birth</label>
                                  <input type="text" id="date_of_birth" name="date_of_birth" fieldtype="age" optional="false" />
                                  <br />
                                  <label for="residence">Residence</label>
                                  <input type="text" name="residence" id="residence" value="" optional="false" ajaxURL="/locations/village" />
                                  <br />
                           <% else %>
                                  <label for="scan_accession_number" >Accession Number </label>
                                  <input type="text" id="scan_accession_number" name="accession_number" optional="false" fieldtype="barcode" callback="doLogin('scan_accession_number')" >
                           				<input id="add_to_session" type="hidden" name="add_to_session" value="true">
                           <% end %>
							</fieldset>
	<%= submit_tag "Finish" %>
           
<%end%>
</body>
<script src="/assets/touchscreentoolkitV2/ts.js?body=1"></script>

<script>
	btnCancel.parentNode.parentNode.parentNode.parentNode.style.backgroundColor="grey";
   function adjust(){
     <% if @show_counselling_room == true %>
            node =  document.getElementById('row2').childNodes[0].childNodes[0];
            node.style.width = "6%";
            node.style.height = "92px";
            document.getElementById('row2').childNodes[0].style.height = "92px";
            document.getElementById('row2').style.height = "92px";
            document.getElementById('row2').childNodes[0].style.backgroundColor = "grey";
            document.getElementById('row2').childNodes[0].style.MozBorderRadius = '1em';
            document.getElementById('row2').childNodes[0].style.borderRadius = '1em';
            button =  document.getElementById('buttons');
            button.style.removeProperty('border')
            button.style.backgroundColor = "grey";
      <% end %>
  }


    function customAlert(msg) {
        if (__$('popup'))
            __$('popup').parentNode.removeChild(__$('popup'));

        var ele = document.createElement('div');
        ele.id = "popup";
        ele.style.display = "inline";
        html = "<div style='display:table;width:100%;'><div style='display:table-row;width:100%;'>"
        html += "<div id='text'>" + msg + "</div></div><div style='display:table-row;width:100%;'>"
        html += '<div id="confirm"><button class="button blue" style="margin: 3px; font-size: 20px; height: 55px;" onmousedown="resetPopup()">Ok</button></div>'
        html += "</div></div></div></div>";
        ele.innerHTML = html;
        document.body.appendChild(ele);
    }

    function resetPopup() {
        var ele = document.getElementById('popup');
        ele.style.display = "none";
        ele.parentNode.removeChild(ele);
    }

    function __$(id){
        return document.getElementById(id);
    }

    <% if !flash[:error].blank? %>
    customAlert("<%= flash[:error]%>");
    <% elsif !flash[:notice].blank?   %>
    customAlert("<%= flash[:notice]%>");
    <% end %>
</script>

</html>
