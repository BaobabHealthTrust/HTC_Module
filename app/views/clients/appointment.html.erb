<html>
<head>

	<%= stylesheet_link_tag 'panel' %>
	</head>
<body>
     
	<form action='/encounters/new/<%= params[:id] %>' method='post'>
	<input type="hidden" value="<%= form_authenticity_token() %>" name="authenticity_token"/>
	<input type="hidden" value="Appointment" name="ENCOUNTER"/>
            <fieldset>
						<legend>Schedule Appointment</legend>

						<br />
                <label for="id">  </label>
	
                <input type="text" id="id"  field_type="calendar" name="observations[][value_datetime]" />
                <%= hidden_field_tag("observations[][concept_name]",        "Appointment Date") %>
		<%= hidden_field_tag("observations[][patient_id]",         params[:id]) %>
		<%= hidden_field_tag("observations[][obs_datetime]",       "") %>

                <br />
							</fieldset>
	<button type='submit'>Finish</button>

        </form>
</body>

	<%= javascript_include_tag 'touchscreentoolkitV2/ts' %>
	<script>

		__$("row1").style.display="none";
		__$("buttons").style.verticalAlign = "bottom";
		__$("buttons").style.width = "100%";
		__$("buttons").style.height = "100%";
                
		btnNext.style.width = "250px";
		btnCancel.style.width = "250px";

		var display = "inline-table";

		btnDivs = __$('buttons').children[0].children;

		btnDivs[1].style.display = "none";
		btnDivs[2].style.display = "none";

		btnDivs[0].style.display  = "inline-table";
		btnDivs[3].style.display  = "inline-table";

		btnDivs[3].style.cssFloat = "right";


    document.getElementById("stage").style.display = "none"
		var dsp = document.createElement("div");
		dsp.id = "dsp";
		dsp.style.display = "table-cell";
		dsp.style.border = "1px solid #3465a4";
		dsp.style.overflow = "hidden";
		dsp.style.borderRadius = "10px";
                dsp.style.borderColor = "rgb(52, 101, 164)"
		dsp.style.width = "100%";
		dsp.style.height = "100%";
		dsp.style.verticalAlign = "top";
		//dsp.innerTHML = "Yes";

		__$('textForid').style.height = "100%";
		__$('textForid').style.width = "100%";

		row.insertBefore(dsp, row.firstChild);
		__$("row0").parentNode.appendChild(__$('buttons'));

               
                html = "<div style='display:table;width:100%;height:100%;vertical-align:middle;'><div style='display:table-row;width:80%;height:10%;vertical-align:middle;over-flow:scroll;'>";
                html += "<div id='value' style='display:table-cell;vertical-align:right;'></div></div>";
								html += "<div style='display:table-row;width:100%;vertical-align:middle;over-flow:scroll;'><div id='booked' style='display:table-cell;vertical-align:right;></div></div></div>"
                __$('dsp').innerHTML = html;

               // input = document.getElementById('id')
               // value =  document.getElementById('value')
               
              //  value.appendChild(input)
                
		btnCancel.parentNode.parentNode.parentNode.style.backgroundColor="grey";
	</script>
		<%= javascript_include_tag 'jquery.min' %>
		<%= javascript_include_tag 'moment.min' %>
		<%= javascript_include_tag 'jquery-ui.custom.min' %>
	  <%= javascript_include_tag 'fullcalendar.min' %>
	  <%= stylesheet_link_tag 'fullcalendar' %>

	   <script type="text/javascript">
	   var cancelDestination = "/htcs";
			
	$(document).ready(function() {
	
		$('#value').fullCalendar({
			height: 650,
			contentHeight: 600,
			selectable: true,
      selectHelper: true,
			dayClick: function(date, jsEvent, view) {
         document.getElementById("id").value = date.format()
					alert(document.getElementById("id").value)
    },
			header: {
				left: 'prev,next today',
				center: 'title',
				right: 'month'
			},
			defaultDate: '<%= Date.today.strftime('%Y-%m-%d')%>',
			editable: true,
			events: [
				{
					title: 'All Day Event',
					start: '<%= Date.today.strftime('%Y-%m-%d')%>'
				},
				{
					title: 'Long Event',
					start: '2014-06-07',
					end: '2014-06-10'
				},
				{
					id: 999,
					title: 'Repeating Event',
					start: '2014-06-09T16:00:00'
				},
				{
					id: 999,
					title: 'Repeating Event',
					start: '2014-06-16T16:00:00'
				},
				{
					title: 'Meeting',
					start: '2014-06-12T10:30:00',
					end: '2014-06-12T12:30:00'
				},
				{
					title: 'Lunch',
					start: '2014-06-12T12:00:00'
				},
				{
					title: 'Birthday Party',
					start: '2014-06-13T07:00:00'
				},
				{
					title: 'Click for Google',
					url: 'http://google.com/',
					start: '2014-06-28'
				}
			]
		});
		
	});
			</script>
	<style>
		.fc-button-month{
				display:none;
			}
	</style>
</html>


